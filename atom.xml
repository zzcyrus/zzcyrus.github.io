<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Cyrus&#39;s Blog</title>
  <subtitle>迷阵</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-07-23T14:30:49.685Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Cyrus</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>element dialog组件嵌套问题的临时方案</title>
    <link href="http://yoursite.com/2017/06/23/vue-dialog-nested/"/>
    <id>http://yoursite.com/2017/06/23/vue-dialog-nested/</id>
    <published>2017-06-23T14:09:55.000Z</published>
    <updated>2017-07-23T14:30:49.685Z</updated>
    
    <content type="html"><![CDATA[<p>&emsp;&emsp;最近用 Vue+element 开发项目时，在dialog组件上嵌套使用dialog组件或是MessageBox这类弹框组件，发现会出现遮罩层重合之类的问题，导致很多人只能选择关闭遮罩层。GitHub上就此问题也出现过类似讨论。有几种解决方案：</p>
<a id="more"></a> 
<ol>
<li><p>按照官方所说，将多个dialog类组件全部移动至<strong>&lt;body</strong>&gt;标签下</p>
</li>
<li><p>Github上某位大牛给出了不完全解决方案，基本思路仍然是将添加在<strong>&lt;el-dialog</strong>&gt;内的dom结构自动移动至<strong>&lt;body</strong>&gt;标签下。这个方式测试了下，似乎纯dialog嵌套问题不大，但是如果dialog内部包含了其他组件会有点问题，智者见智，自行探索了</p>
</li>
</ol>
<p>&emsp;&emsp;<a href="https://github.com/foolishchow/element-dialog2" target="_blank" rel="external">附上连接</a></p>
<ol>
<li>编写自己modal遮罩层，这里给出个不完全临时代码仅供参考</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Vue.prototype.$Modal = &#123;</div><div class="line">    open(element) &#123;</div><div class="line">        <span class="keyword">var</span> index = <span class="number">1</span>;</div><div class="line">        <span class="keyword">var</span> wrapper = element.querySelector(<span class="string">'.el-dialog__wrapper'</span>);</div><div class="line">        <span class="keyword">if</span> (wrapper) &#123;</div><div class="line">            index = wrapper.style.zIndex - <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> modalDom = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</div><div class="line">        modalDom.className = <span class="string">'v-modal'</span>;</div><div class="line">        element.appendChild(modalDom);</div><div class="line">        modalDom.style.zIndex = index;</div><div class="line">    &#125;,</div><div class="line">    close() &#123;</div><div class="line">        <span class="keyword">var</span> modal = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'v-modal'</span>)[<span class="number">0</span>;</div><div class="line">        modal.parentNode.removeChild(modal);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>&emsp;&emsp;一般调用方法<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">mounted: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>;</div><div class="line">    <span class="keyword">this</span>.$nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">//遮罩层</span></div><div class="line">        that.$nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            that.$Modal.open(that.$el);</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">&#125;,</div></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;主要想法就是在组件mounted完成的nextTick后，为页面中添加一个div，样式就直接采用element自己的了，因为遮罩层是添加在dialog组件下的，因此组件销毁后也会自己销毁，close方法也没用上，但也应该会遇到有用上的时候吧。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;emsp;&amp;emsp;最近用 Vue+element 开发项目时，在dialog组件上嵌套使用dialog组件或是MessageBox这类弹框组件，发现会出现遮罩层重合之类的问题，导致很多人只能选择关闭遮罩层。GitHub上就此问题也出现过类似讨论。有几种解决方案：&lt;/p&gt;
    
    </summary>
    
    
      <category term="FE" scheme="http://yoursite.com/tags/FE/"/>
    
      <category term="Vue" scheme="http://yoursite.com/tags/Vue/"/>
    
  </entry>
  
</feed>
