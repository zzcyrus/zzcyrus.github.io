<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><meta name="google-site-verification" content="google1353837d2ec77422.html"><title>Kaely | 迷陣</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script async src="https://www.googletagmanager.com/gtag/js?id=G-5HJZ375VHJ"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-5HJZ375VHJ');
</script><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 6.0.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Kaely</h1><a id="logo" href="/.">Kaely</a><p class="description">迷陣</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title"><a href="/2022/02/17/tool-thematic-refactor/">thematic工具的重构</a></h1><div class="post-meta">2022-02-17</div><div class="post-content"><p>前面说的thematic出图流程有一个明显<strong>诟病</strong>，从软件开发的角度上看相当的不成熟，就是一个纯业务流程的产物，前后端耦合极高，再加上很多很多业务化服务希望能自动集成出图的结果，所以一直有重构的想法，并让其更加易用、易扩展。之后幸运的看到了这么一篇文章<a target="_blank" rel="noopener" href="https://github.com/ascoders/weekly/blob/v2/121.%E7%B2%BE%E8%AF%BB%E3%80%8A%E5%89%8D%E7%AB%AF%E4%B8%8E%20BI%E3%80%8B.md">精读《前端与 BI》</a>，让我对整个流程有了新的想法。</p></div><p class="readmore"><a href="/2022/02/17/tool-thematic-refactor/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2022/02/12/tool-thematic-intro/">thematic工具的诞生</a></h1><div class="post-meta">2022-02-12</div><div class="post-content"><p>在气象行业，将各类型数据保存成图片，附着在各类文档材料中是个很常见的需求，其实行业内有些成熟的软件去处理这个事情，比方说常用的<a target="_blank" rel="noopener" href="https://www.ncl.ucar.edu/">NCL</a>，python中也有matplotlib包来绘制各类型的图片。从系统的角度上来说，业务人员会希望有一个交互性更好的平台来实现出图。</p></div><p class="readmore"><a href="/2022/02/12/tool-thematic-intro/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2022/02/10/cesium-dev-ground-primitive-custom-canvas/">Cesium 开发系列8 贴地展示-自定义canvas</a></h1><div class="post-meta">2022-02-10</div><div class="post-content"><p>在Cesium中对点、线、面不同类型feature做贴地的具体操作，就不再赘述了，我们在二维的地图sdk使用过程中经常会开发一些自定义图层，大多基于canvas来实现，例如热力图、色板图、echarts图等，像leaflet中通常是一个新的dom来与主地图做同步，mapbox等新生代选手则可以直接添加到主地图的dom中。</p>
<p>对于这类自定义的canvas图层，在cesium中想要贴在地形之上进行展示，其实也很简单，<strong>GroundPrimitive</strong>配合上自定义<strong>material</strong>就好了，具体过程可以参考代码的注释。</p></div><p class="readmore"><a href="/2022/02/10/cesium-dev-ground-primitive-custom-canvas/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2020/06/23/radar-vector-tile-try/">试着还原下墨迹mapbox合作的雷达图展示</a></h1><div class="post-meta">2020-06-23</div><div class="post-content"><p>在<a target="_blank" rel="noopener" href="https://juejin.im/post/5d4e8572e51d453c12504dd4">四步走，墨迹天气雷达数据可视化指南</a>这篇文章中，提到了用<strong>矢量瓦片</strong>代替传统传统栅格图像可视化方案，可以达到更流程的性能，更高清的数据展示，更灵活的样式表达。感觉挺有意思，同时也为了考察这么做的成本，就试着还原做了下。</p>
<p>从文章来看整个过程总结起来就是准备数据<code>geojson</code>，切成<code>pbf</code>或者<code>mbtiles</code>在 mapbox 中展示。</p></div><p class="readmore"><a href="/2020/06/23/radar-vector-tile-try/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2020/05/17/web-grid-data-render-1/">在web中渲染格点数据探讨（1）</a></h1><div class="post-meta">2020-05-17</div><div class="post-content"><p>在地理信息行业中，我们常遇见的数据中有这么两类：</p>
<ul>
<li>一类是站点（散点）数据。地图上分布着位置不均匀的各种站点，比方说气象站，水文站，如果我们需要查看站点数值趋势，就可以通过等值线图等方式，比如<a target="_blank" rel="noopener" href="https://github.com/d3/d3-contour">d3 的 contour</a>，<a target="_blank" rel="noopener" href="https://turfjs.org/docs/#isolines">turf 的 isolines</a>，还可以通过插值方法将站点插值到网格上，转化成格点数据，后面我们也会讨论。</li>
<li>也有一类是格点数据。这个在气象上就非常常见，气象预报数据通常是模式跑出来的，如同渔网一样的格点，这种数据提供了查询任意位置数值的作用，它的渲染也同样常见，传统的方法是在服务器端生成好对应图片，在浏览器上贴图，这里追求实现的是<code>前端渲染</code>。</li>
</ul></div><p class="readmore"><a href="/2020/05/17/web-grid-data-render-1/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2019/11/18/leaflet-canvas-marker/">Leaflet.Canvas-Marker-Layer 图层的诞生</a></h1><div class="post-meta">2019-11-18</div><div class="post-content"><p>之前写过一个基于 Leaflet 的标注点图层插件，<a target="_blank" rel="noopener" href="https://github.com/zzcyrus/Leaflet.Canvas-Marker-Layer">Leaflet.Canvas-Marker-Layer</a>，今天简单的说一下为什么需要用到它。在 Leaflet 中如果你需要渲染 marker，有两种方式：</p></div><p class="readmore"><a href="/2019/11/18/leaflet-canvas-marker/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2019/07/22/tilestrata-plugin/">tilestrata 插件发开指南</a></h1><div class="post-meta">2019-07-22</div><div class="post-content"><p><a target="_blank" rel="noopener" href="https://github.com/naturalatlas/tilestrata">Tilestrata</a>的插件开发基本围绕着生命周期各个阶段展开，如果要开发一个自己的插件，首先想清楚插件的功能属于生命周期的哪个阶段，依据官方规定好的该阶段代码结构，写好插件内容，在服务端利用<code>use</code>进行注册就好。个人觉得<code>Tilestrata</code>吸引人的一个地方就是在于插件机制非常的灵活和便捷，十分好上手。</p></div><p class="readmore"><a href="/2019/07/22/tilestrata-plugin/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2019/07/18/tilestrata-intro/">tilestrata 入门指南</a></h1><div class="post-meta">2019-07-18</div><div class="post-content"><p>简单来说<a target="_blank" rel="noopener" href="https://github.com/naturalatlas/tilestrata"><strong>Tilestrata</strong></a>就是一个瓦片地图服务器。根据其自身的介绍，它有如下的特点：零配置，简洁，测试覆盖率高，性能高，拓展性强。可以通过<a target="_blank" rel="noopener" href="https://github.com/naturalatlas/tilestrata-balancer">TileStrata Balancer</a>实现负载均衡，无缝伸缩。可以通过内置<a target="_blank" rel="noopener" href="https://github.com/naturalatlas/tilestrata#profiling--debugging-performance">控制台</a>去调试查看渲染时间。</p></div><p class="readmore"><a href="/2019/07/18/tilestrata-intro/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2019/07/15/tilestrata-disk/">tilestrata-disk 插件使用及浅析</a></h1><div class="post-meta">2019-07-15</div><div class="post-content"><p><a target="_blank" rel="noopener" href="https://github.com/naturalatlas/tilestrata-disk">tilestrata-disk</a>插件可以在磁盘中存储&#x2F;检索瓦片。它可以兼顾瓦片缓存和瓦片提供两个功能，代码虽简单，但是功能十分全面，个人感觉非常的实用，很值得推荐。</p>
<p>用它来缓存瓦片时，一定要为每个图层使用不同的目录（例如：”tiles&#x2F;layer_a”, “tiles&#x2F;layer_b”）。如果设置了<code>maxage</code>参数，插件会检查瓦片的最近一次修改时间，如果间隔过长，将返回<code>null</code>。如果 设置<code>maxage=0</code>，就相当于没有开启缓存功能。</p></div><p class="readmore"><a href="/2019/07/15/tilestrata-disk/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2019/07/15/tilestrata-etag/">tilestrata-etag 插件使用及浅析</a></h1><div class="post-meta">2019-07-15</div><div class="post-content"><p><a target="_blank" rel="noopener" href="https://github.com/naturalatlas/tilestrata-etag">tilestrata-etag</a>插件可以在 tilestrata 的请求中设置 ETag，可以让服务缓存变得更加高效可控，节省带宽。如果客户端的 ETag 的版本和服务器要发送的一致，则可以直接使用缓存中的数据，不再重新发送数据。</p></div><p class="readmore"><a href="/2019/07/15/tilestrata-etag/">阅读全文</a></p></div><nav class="page-navigator"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">下一页</a></nav></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://kaely.net"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Cesium/">Cesium</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node/">Node</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PostGIS/">PostGIS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TileStrata/">TileStrata</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/WebGIS/">WebGIS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8F%AF%E8%A7%86%E5%8C%96/">可视化</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/zzcyrus" title="我的Github" target="_blank">我的Github</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2022 <a href="/." rel="nofollow">Kaely.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" id="maid-script" src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js?v=1.0.0"></script><script>if (window.mermaid) {
  var options = JSON.parse(document.getElementById('maid-script').getAttribute('mermaidoptioins')) || {};
  mermaid.initialize(options);
}</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>